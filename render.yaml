services:
  - type: web
    name: auto-crud-backend
    runtime: node  # Node version automatically detected from .nvmrc (Node 20) or package.json engines
    plan: starter
    # Region: Choose during deployment in Render Dashboard (see comments below)
    # Available regions: Oregon (US West), Ohio (US Central), Virginia (US East), Frankfurt (EU), Singapore (Asia)
    # Note: Region must be selected in Dashboard - cannot be specified in render.yaml
    # Root Directory: Set to "server" in Render Dashboard for monorepo (prevents client changes from triggering redeploys)
    buildCommand: npm install
    startCommand: npm start
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        fromService:
          type: web
          name: auto-crud-backend
          property: port
      - key: JWT_SECRET
        generateValue: true
      - key: CORS_ORIGIN
        sync: false  # Set this to your Vercel frontend URL after deployment
      # Database configuration (SQLite - for persistent storage, use Render Disk)
      # If using PostgreSQL, uncomment and configure:
      # - key: DATABASE_URL
      #   fromDatabase:
      #     name: auto-crud-db
      #     property: connectionString

# Optional: PostgreSQL Database (recommended for production)
# databases:
#   - name: auto-crud-db
#     plan: starter
#     databaseName: auto_crud
#     user: auto_crud_user

